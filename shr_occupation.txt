Grammar:		DataElement 5.0
Namespace:		shr.occupation
Description:	"Patient’s or family member's work information."
Uses:  			shr.core, shr.base, cimi.core, cimi.context, cimi.topic, cimi.statement, cimi.composition, cimi.entity, cimi.element, cimi.encounter

CodeSystem:     LNC = http://loinc.org
CodeSystem:		MTH = http://ncimeta.nci.nih.gov
CodeSystem:     UCUM = http://unitsofmeasure.org 
CodeSystem:		OBSCAT = http://hl7.org/fhir/observation-category

EntryElement:	OccupationalDataComposition
Concept:		LNC#74166-0
Based on:		Composition 
Description:	"Current and past activities for profit, wages, salary, or as a service to others."
1..1			Section is type OccupationalDataSection

Element:		OccupationalDataSection
Concept:		TBD
Based on:		Section
Description:	"Single section in the current OccupationalDataComposition, containing the person's history of employment and occupation, past and present."
				ClinicalStatement 
includes 0..*   HistoryOfEmploymentStatus
includes 0..*	DateOfRetirement
includes 0..*	CombatZonePeriod
includes 0..1	UsualOccupation
includes 0..*	PastOrPresentOccupation

EntryElement:	HistoryOfEmploymentStatus
Based on:		CodedSocialHistoryObservation
Concept:		LNC#74165-2 "HistoryOfEmploymentStatus"
Description:	"A person’s state of being employed during the time period specified. 
Generally, employment status refers to whether or not a person has a job (e.g. employed, unemployed, not in labor force). In a healthcare setting employment status may be used to determine appropriate probing questions for occupational hazards and occupational history. For example, someone who is unemployed or has chosen not to work may be prompted to provide information about previous jobs. Employment status is not the same as work classification, which describes characteristics of a given job such as self-employed."
//0..0			SubjectIfNotPersonOfRecord
				ObservationTopic.TopicCode is LNC#74165-2 "HistoryOfEmploymentStatus"
				ObservationContext.ResultValue value is type CodeableConcept
				ObservationContext.ResultValue from EmploymentStatusVS
0..0			ObservationTopic.EvaluationComponent
0..0			ObservationTopic.Focus

EntryElement:	DateOfRetirement
Based on:		SocialHistoryObservation
Concept:		LNC#87510-4 "Date of Retirement"
Description:	"If present, the patient is retired, and this observation records the retirement date.
This is a self-identified statement about the date of being retired as self-identified by the patient. A person can be both retired and employed; most often, a person would be retired from one job and employed in another job."
//0..0			SubjectIfNotPersonOfRecord
				ObservationTopic.TopicCode is LNC#87510-4 "Date of Retirement"
				ObservationContext.ResultValue value is type dateTime
0..0			ObservationTopic.EvaluationComponent
0..0			ObservationContext.RelevantTime // The result value contains the date of retirement, so having a relevant time would be redundant.
0..0			ObservationTopic.Focus 

EntryElement:	CombatZonePeriod
Based on:		SocialHistoryObservation
Concept:		LNC#87511-2
Description:	"Indicates the date range(s) an individual hs worked in what is considered a combat or hazardous duty zone; both civilian and military."
//0..0			SubjectIfNotPersonOfRecord
				ObservationTopic.TopicCode is LNC#87511-2
				ObservationContext.ResultValue value is type TimePeriod
0..0			ObservationTopic.EvaluationComponent
0..0			ObservationContext.RelevantTime // The result value contains the time period of combat zone activity, so the relevant time would be redundant.
0..0			ObservationTopic.Focus // only patient

				
EntryElement:	UsualOccupation
Based on:		CodedSocialHistoryObservation
Concept:		LNC#21843-8
Description:	"The type of work a person has held for the longest duration during his or her working history at the point in time the statement is recorded."
// We'll need to determine the fix here -- US Core requires Subject to be a patient, but ODH allows patient or related person
				ObservationTopic.TopicCode is LNC#21843-8
				ObservationContext.ResultValue could be from OccupationVS
				ObservationTopic.Focus value is type CodeableConcept
				ObservationTopic.Focus from http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype				
				ObservationTopic.EvaluationComponent
includes 1..1 	UsualIndustry 
includes 0..1	UsualOccupationDuration 
1..1			ObservationContext.RelevantTime 
				ObservationContext.RelevantTime value is type TimePeriod

	
/* UsualOccupation is in the value element
	Element:		UsualOccupation
	Based on:		CodedEvaluationComponent
	Concept:		LNC#21843-8 "History of Usual Occupation" // Occupation is LNC#74287-4
	Description:	"A person's work or business"
	Value:			CodeableConcept could be from OccupationVS	// VS defined in FHIR 3.2 and not found in 3.0.1
*/
	Element:		UsualIndustry
	Based on:		CodedEvaluationComponent
	Concept:		LNC#21844-6 "History of Usual industry"
	Description:	"The industry (type of business) which the subject has worked in for the longest duration while in the usual occupation.
	For example, a person who has spent 30 years as a secretary in various industries, but mostly in construction, would record a usual occupation of secretary and a usual industry of construction."  // "A history of this observation is not retained.   Actually past versions of the observation could be retained, but the panel should refer to the latest one only.
	Value:			CodeableConcept could be from IndustryVS
					TopicCode is LNC#21844-6 "History of Usual industry"

	Element:		UsualOccupationDuration
	Based on:		EvaluationComponent
	Concept:		LNC#74163-7 "Usual occupation duration"
	Description:	"The total time spent on an activity, inclusive of all time intervals, whether continuous or interrupted."
	Value:			Quantity with units UCUM#a
					TopicCode is LNC#74163-7 "Usual occupation duration"
	
EntryElement:	PastOrPresentOccupation
Based on:		CodedSocialHistoryObservation
Concept:		LNC#11341-5 "History of Occupation"
Description:	"A single job, past or present. The relevant time is the period the job was held."
				ObservationTopic.TopicCode is LNC#11341-5 "History of Occupation"
				ObservationContext.ResultValue could be from OccupationVS
0..1			Employer // must be extension; cannot be a result value or an evaluation component because the value is a reference to Person or Organization
				ObservationTopic.Focus value is type CodeableConcept
				ObservationTopic.Focus from http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype
				ObservationTopic.EvaluationComponent
includes 0..1	PastOrPresentIndustry
includes 0..1	WorkClassification
includes 0..1	SupervisoryLevel
includes 0..*	JobDuty
includes 0..*	OccupationalHazard
includes 0..1	WorkSchedule
includes 0..1	WeeklyWorkDays
includes 0..1	DailyWorkHours
1..1			ObservationContext.RelevantTime 
				ObservationContext.RelevantTime value is type TimePeriod

// Question -- organization only, or person or organization
	Element:		Employer
	Based on:		Role
	Concept:		SCT#394571004 "Employer (person)"
	Description:	"A person or organization that hires the services of another."
	Value:			ref(Person) or ref(Organization)

	Element:		PastOrPresentIndustry
	Based on:		CodedEvaluationComponent
	Concept:		LNC#86188-0 	
	Description:	"The type of business (industry) in which the subject currently holds or has held a job in the past." 
	Value:			CodeableConcept could be from IndustryVS
					TopicCode is LNC#86188-0

	Element:		WorkClassification
	Based on:		CodedEvaluationComponent
	Concept:		LNC#85104-8 "Compensation and sector employment type"
	Description:	"Employment attributes for a given job. 
	This specifies information about the worker’s job, such as self-employed or unpaid, and is similar to the U.S. Bureau of Labor Statistics ‘class of worker’ and the International Labor Organization ‘classification of status in employment’. Knowing a patient is self-employed, for example, can assist in discussing return-to-work options."
	Value:			CodeableConcept could be from WorkClassificationVS 
					TopicCode is LNC#85104-8 "Compensation and sector employment type"

	Element:		SupervisoryLevel
	Based on:		CodedEvaluationComponent
	Concept:		LNC#87707-6
	Description:	"The supervisory or management responsibilities for an individual’s job. For military jobs, this is pay grade."
	Value:			CodeableConcept could be from SupervisoryLevelVS	 
					TopicCode is LNC#87707-6

	Element:		JobDuty
	Based on:		EvaluationComponent
	Concept:		LNC#63761-1
	Description:	"Regular actions performed at work. A person may have the occupation of 'construction laborer' and his specific job duty to carry construction supplies."
	Value:			string
	0..0			ReferenceRange
					TopicCode is LNC#63761-1
	
	Element:		OccupationalHazard
	Based on:		EvaluationComponent
	Concept:		LNC#87729-0
	Description:	"Actual contact or interaction with a specific hazard that increases an individual’s risk of a detrimental physical or mental health outcome (e.g., ingestion or inhalation of a toxic chemical). 
	Information on an exposure may include the measurement of duration/intensity of contact or interaction with the specific hazard."
	Value:			string
	0..0			ReferenceRange
					TopicCode is LNC#87729-0
					
	Element:		WorkSchedule
	Based on:		CodedEvaluationComponent
	Concept:		LNC#74159-5
	Description:	"An individual's typical arrangement of working hours for an occupation. 
	For example, work schedule may capture that an individual typically works a regular day shift, evening shift, or night shift. It can also specify if an individual has another type of schedule, such as a rotating shift, split shift, etc."
	Value:			CodeableConcept could be from WorkScheduleVS 
					TopicCode is LNC#74159-5

	Element:		WeeklyWorkDays
	Based on:		EvaluationComponent
	Concept:		LNC#74160-3
	Description:	"The typical number of days per week that a person spends performing their duties for work. 
	This information is most useful coupled with daily work hours and helps to reveal compressed schedules or a 7-day work-week."
	Value:			Quantity with units UCUM#d
	0..0			ReferenceRange
					TopicCode is LNC#74160-3
							
	Element:		DailyWorkHours
	Based on:		EvaluationComponent
	Concept:		LNC#87512-0
	Description:	"The typical number of hours in a day that a person spends performing their duties for work.
	This information is most useful coupled with weekly work days and helps to reveal compressed schedules, long work hours, and overtime."
	Value:			Quantity with units UCUM#h
	0..0			ReferenceRange
					TopicCode is LNC#87512-0

Element:		SocialHistoryObservation
Based on:		FindingStatement
Description:	"A simplified observation for social histories."
// 0..0			SourceOfInformation
//0..0			Recorded
//0..0			Signed
				StatementTopic is type ObservationTopic
				StatementContext is type ObservationContext
//				SubjectIfNotPersonOfRecord value is type ref(RelatedPerson)
//				SourceOfInformation value is type AnyPersonOrOrganization // mapped to performer (who made the observation)
				ObservationTopic.Category is OBSCAT#social-history
0..0			ObservationTopic.FindingMethod
0..0			ObservationTopic.AnatomicalLocation
0..0			ObservationTopic.Precondition
0..0			ObservationTopic.ReferenceRange
0..0			ObservationTopic.PanelMembers
0..0			ObservationContext.ExceptionValue
0..0			ObservationContext.Interpretation
0..0			ObservationContext.Encounter
0..0			ObservationContext.DeltaFlag
0..0			ObservationTopic.Device
0..0			ObservationTopic.Specimen
0..0			ObservationTopic.Media


Element:		CodedSocialHistoryObservation
Based on:		SocialHistoryObservation
Description:	"The result of social history questions, whose answer is expressed as a code."
				ObservationContext.ResultValue value is type CodeableConcept
0..0			ObservationTopic.ReferenceRange

/*
EntryElement:	MilitaryServiceHistory
Based on:		ComponentOnlyNonLaboratoryObservation
Description:	"History of service in the US military."
				ObservationTopic.Category is OBSCAT#social-history
				ObservationTopic.TopicCode is MTH#C3714797
				ObservationTopic.EvaluationComponent
includes 1..1	MilitaryStatus
includes 0..1 	MilitaryServiceDischargeStatus
includes 0..1	MilitaryBranch
includes 0..*	MilitaryServiceEra
includes 0..1	ServiceConnectedDisability
//includes 0..1	TBD "MilitaryRank"
0..0			ObservationTopic.FindingMethod
0..0			ObservationTopic.AnatomicalLocation
0..0			ObservationTopic.Focus
0..0			ObservationTopic.Device
0..0			ObservationTopic.Precondition
0..0			ObservationContext.Interpretation
0..0			ObservationContext.RelevantTime  
0..0			ObservationContext.Encounter
0..0			ObservationContext.DeltaFlag

	Element:		MilitaryStatus
	Concept:		MTH#C1550416
	Based on:		CodedEvaluationComponent
	Description:	"The current connection to the US military."
	Value:			CodeableConcept from MilitaryStatusVS

	Element:		MilitaryServiceDischargeStatus
	Concept:		TBD
	Based on:		CodedEvaluationComponent
	Description:	"How the subject was formally discharged from the US Military."
	Value:			CodeableConcept from MilitaryServiceDischargeStatusVS

	Element:		MilitaryBranch
	Concept:		MTH#C2129058
	Based on:		CodedEvaluationComponent
	Description:	"The branch of the US military that the subject has served."
	Value:			CodeableConcept from USMilitaryBranchVS

	Element:		MilitaryServiceEra
	Concept:		TBD
	Based on:		CodedEvaluationComponent
	Description:	"The time period of US military service."
	Value:			CodeableConcept from MilitaryServiceEraVS

	Element:		ServiceConnectedDisability
	Based on:		EvaluationComponent
	Concept:		TBD
	Description:	"Percentage disability resulting from US Military Service."
	Value:			Quantity with units UCUM#%
	0..0			ReferenceRange


EntryElement:	OccupationalDataSummary
Concept:		LNC#74166-0
Based on:		Observation  // Overall outer container could be a Composition. 
Description:	"Current and past activities for profit, wages, salary, or as a service to others."
				ObservationTopic.TopicCode is LNC#74166-0
				ObservationTopic.Category is OBSCAT#social-history
0..0			ObservationTopic.EvaluationComponent
				ObservationTopic.PanelMembers.Observation
includes 0..* 	HistoryOfEmploymentStatus
includes 0..*	DateOfRetirement
includes 0..*	CombatZonePeriod 
includes 0..1	UsualOccupation
includes 0..*	PastOrPresentOccupation
0..0			ObservationTopic.FindingMethod
0..0			ObservationTopic.AnatomicalLocation
0..0			ObservationTopic.Focus
0..0			ObservationTopic.Device
0..0			ObservationTopic.Specimen
0..0			ObservationTopic.Precondition
0..0			ObservationTopic.ReferenceRange
0..0			ObservationContext.ResultValue
0..0			ObservationContext.ExceptionValue
0..0			ObservationContext.Interpretation
0..0			ObservationContext.RelevantTime 
0..0			ObservationContext.DeltaFlag
*/


