Grammar:           DataElement 6.0
Namespace:         obf
Uses:              obf.datatype
CodeSystem:        MTH = http://ncimeta.nci.nih.gov
CodeSystem:        LNC = http://loinc.org
CodeSystem:        IDTYPE = http://terminology.hl7.org/CodeSystem/v2-0203

Abstract:          EntityOrRole
Parent:            InformationItem
Description:       "Abstract parent class for both Entity and Role."

Abstract:          Entity
Parent:            EntityOrRole
Description:       "Root class for entities such as people, organizations, and devices that have a separately identifiable existence."
Property:          PartOf 0..1

Element:           PartOf
Description:       "The larger entity that the asserted item is a portion of. For example, an organization part of a larger organization, or an encounter with a hospitalist might be part of a larger hospitalization encounter."
Value:             Resource

Entry:             Specimen
Parent:            Entity
Description:       "A specimen is a substance, physical object, or collection of objects, that the laboratory considers a single discrete, uniquely identified unit that is the subject of one or more steps in the laboratory workflow. A specimen may include multiple physical pieces as long as they are considered a single unit within the laboratory workflow. A specimen results from one to many specimen collection procedures, and may be contained in multiple specimen containers. Specimen may have one or more processing activities."
Property:          AccessionIdentifier 0..1
Property:          SpecimenType 1..1
Property:          CollectionSource 0..1
Property:          CollectionTime 0..1
Property:          CollectionMethod 0..1
Property:          CollectionSite 0..1
Property:          AmountOrSize 0..1
Property:          ReceivedTime 0..1
Property:          SpecimenContainer 0..*
Property:          SpecimenTreatment 0..*
Property:          HandlingRisk 0..*
Property:          SpecialHandling 0..*
                   Status from http://hl7.org/fhir/ValueSet/specimen-status (required)
                   PartOf[Resource] substitute Specimen

Element:           SpecimenType
Description:       "The type of material the specimen contains or consists of."
Value:             concept from http://terminology.hl7.org/ValueSet/v2-0487 (example)

Element:           CollectionSite
Description:       "The body site where specimen was collected"
Value:             BodyLocation

Element:           CollectionMethod
Description:       "How the specimen was obtained."
Value:             concept

Abstract:          Role
Parent:            EntityOrRole
Description:       "Capacity in which an actor is involved in an activity. For instance, 'attending physician'. Note that attributes of the actor (an entity) that remain constant regardless of the role the actor plays should be part of the entity and not the role. For instance, a person may be a practitioner and a patient. In both cases their date of birth will be the same and thus such information should not be part of the role."

Entry:             RelatedPerson
Parent:            Role
Description:       "A person in a role defined in relationship to a patient"
Property:          Active 0..1
Property:          Patient 1..1
Property:          Relationship 0..1
                   // max card by DSTU 2
Property:          HumanName 0..1
Property:          ContactPoint 0..*
Property:          AdministrativeGender 0..1
Property:          BirthDate 0..1
Property:          Address 0..*
Property:          PhotographicImage 0..*
Property:          EffectiveTimePeriod 0..1
Property:          Communication 0..*
                   Status 0..0
                   // required binding in DSTU 2
                   Relationship from http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype (required)

Element:           Mode
Description:       "The manner in which the item should be interpreted. For example, mode could indicates whether a resource instance represents a specific item or a class of items, an actual or potential event, a working list or a snapshot of a historical list, etc."
Value:             concept

Entry:             Patient
Parent:            Role
Description:       "A person in the role of a patient. Sometimes, the patient is not the subject of information in a clinical statement where the Patient is the SubjectOfRecord. 

Compatibility: Lies at the intersection of Argonaut and US Core Patient. MaritalStatus has a required binding in Argonaut, but an extensible binding in US-Core. To be feasible under both DSTU2 Argonaut and STU3 US-Core, the required binding strength is adopted."
Property:          Active 0..1
Property:          HumanName 1..*
Property:          ContactPoint 0..*
Property:          AdministrativeGender 1..1
Property:          BirthDate 0..1
Property:          Deceased 0..1
Property:          Address 0..*
Property:          MaritalStatus 0..1
Property:          MultipleBirth 0..1
Property:          PhotographicImage 0..*
Property:          ContactPerson 0..*
Property:          Communication 0..*
Property:          GeneralPractitioner 0..*
Property:          ManagingOrganization 0..1
Property:          SamePersonAs 0..*
                   // US-Core extensions
Property:          BirthSex 0..1
Property:          Race 0..1
Property:          Ethnicity 0..1
                   Status 0..0
                   Identifier 1..*

Element:           Active
Description:       "Whether the record is in use (true) or retired (false)."
Value:             boolean

Element:           PlaceOfBirth
Concept:           MTH#C0032040
Description:       "The location of a birth event. There may be multiple entries, but a person has only one place of birth."
Value:             Address

Group:             ContactPerson
Description:       "A contact party (e.g. guardian, partner, friend) for the person"
Property:          Relationship 0..*
Property:          HumanName 0..1
Property:          ContactPoint 0..*
Property:          Address 0..1
Property:          AdministrativeGender 0..1
Property:          Organization 0..1
Property:          TimePeriod 0..1

Element:           MultipleBirth
Description:       "If the person was part of a multiple birth event, and if so in which order."
Value:             boolean or integer

Element:           BirthSex
Concept:           MTH#C4086849
Description:       "Administrative sex assigned at birth and recorded on birth certificate."
Value:             concept from http://hl7.org/fhir/us/core/ValueSet/us-core-birthsex (required)

Group:             Race
Concept:           MTH#C0034510
Description:       "Subjective association of a person with a named category of humans sharing common history, traits, place of family origin, nationality, tribe, or other inherited background."
Property:          RaceCode 0..1
Property:          RaceDetail 0..*

Element:           RaceCode
Description:       "A code for the person's race"
Value:             concept from http://hl7.org/fhir/us/core/ValueSet/omb-race (required)

Element:           RaceDetail
Description:       "Additional description of race or heritage."
Value:             concept from http://hl7.org/fhir/us/core/ValueSet/detailed-race (required)

Group:             Ethnicity
Concept:           MTH#C0015031
Description:       "Indicator of Hispanic or Latino origin."
Property:          EthnicityCode 1..1
Property:          EthnicityDetail 0..*

Element:           EthnicityCode
Description:       "A code for the person's ethnicity"
Value:             concept from http://hl7.org/fhir/us/core/ValueSet/omb-ethnicity (required)

Element:           EthnicityDetail
Description:       "Additional description of ethnicity."
Value:             concept from http://hl7.org/fhir/us/core/ValueSet/detailed-ethnicity (required)

Element:           MothersMaidenName
Concept:           MTH#C0806887
Description:       "The name of the mother as it was or likely to have been recorded on the birth certificate of the subject. This is most likely the name prior to marriage of the mother (aka the maiden name)."
Value:             HumanName

Element:           FathersName
Description:       "The name of the father as it was or likely to have been recorded on the birth certificate of the subject; most likely the name of the father at the time of birth of the subject."
Value:             HumanName

Element:           SocialSecurityNumber
Concept:           MTH#C1301821
Description:       "A US social security number (SSN)."
                   // note that missing value reasons include "none" - meaning the subject does not have a SSN
Value:             string

Group:             DriversLicenseInformation
Description:       "Identifying information from a drivers license."
Property:          DriversLicenseNumber 0..1
Property:          StateOfIssue 0..1
Property:          EffectiveTimePeriod 0..1

Element:           DriversLicenseNumber
Description:       "The drivers license number."
Value:             string

Element:           StateOfIssue
Description:       "A state or country acting as an assuing authority for a document."
Value:             State

Group:             PassportInformation
Concept:           MTH#C1549737
Description:       "Credential indicating citizenship."
Property:          PassportNumber 1..1
Property:          CountryOfIssue 1..1
Property:          EffectiveTimePeriod 0..1

Element:           PassportNumber
Description:       "The passport number."
Value:             string

Element:           CountryOfIssue
Description:       "A country acting as an assuing authority for a document."
Value:             Country

Group:             MedicalInterpreter
Concept:           MTH#C1442531
Description:       "Whether the subject requires an interpreter to communicate with an English-speaking provider."
Property:          MedicalInterpreterNeeded 1..1
Property:          Language 1..1

Element:           MedicalInterpreterNeeded
Concept:           MTH#C1442531
Description:       "Whether the subject requires an interpreter to communicate with an English-speaking provider."
Value:             concept from YesNoUnknownVS (required)

Element:           MaritalStatus
Concept:           MTH#C0024819
Description:       "The most recent marital status of a person."
                   // if covered  // DSTU 2 change -- MaritalStatus has a required binding in Argonaut
Value:             concept from http://hl7.org/fhir/ValueSet/marital-status (required)

Element:           AnonymizedFlag
Concept:           MTH#C3858751
Description:       "Flag indicating if personally identifiable information has been withheld or disguised."
Value:             concept from YesNoVS (required)

Element:           FictionalPersonFlag
Concept:           MTH#C0887933
Description:       "Flag indicating if this record represents a fictional (synthetic, not real) person."
Value:             concept from YesNoVS (required)

Element:           BirthDate
Concept:           MTH#C2919018, LNC#21112-8
Description:       "A date of birth or approximate year or period (year or date range), if estimated."
Value:             date or TimePeriod

Element:           AdministrativeGender
Concept:           MTH#C1550327
Description:       "A gender classification used for administrative purposes. Administrative gender is not necessarily the same as a biological description or a gender identity. This attribute does not include terms related to clinical gender."
Value:             concept from http://hl7.org/fhir/ValueSet/administrative-gender (required)

                   // not the Communication resource
Group:             Communication
Description:       "Language used for communication by a human, either the subject of record, parent, or other involved person."
                   // do not specify value set because argo R2 is different than US-Core in STU3
Property:          Language 1..1
Property:          Preferred 0..1
                   // removed attributes are not in FHIR
                   //	0..1 			SpokenLanguageProficiency
                   //	0..1 			WrittenLanguageProficiency
                   //	0..*			LanguageQualifier

Element:           Preferred
Description:       "Indicates preference."
Value:             boolean

Element:           SpokenLanguageProficiency
Concept:           MTH#C0678997
Description:       "Accuracy and fluency in spoken communication in a language."
Value:             concept from PerformanceGradingScaleVS (required)

Element:           WrittenLanguageProficiency
Concept:           MTH#C0586739
Description:       "Accuracy and fluency of reading and writing in a language."
Value:             concept from PerformanceGradingScaleVS (required)

Element:           LanguageQualifier
Description:       "Additional information about a person's use of language."
Value:             concept from LanguageQualifierVS (required)

Element:           Deceased
Description:       "An indication that the person is no longer living, given by a date of death, or boolean value. The latter, when true, indicates the person is deceased."
Value:             boolean or dateTime

/*
		Element:		AgeAtDeath
		Concept:		MTH#C1546180
		Description:	"The age, age range, or age group when the cessation of life happens."
		Value:			Age or Range
*/
Element:           GeneralPractitioner
Description:       "Patient's nominated primary care provider."
Value:             Organization or Practitioner

Group:             SamePersonAs
Description:       "Link to another patient resource that concerns the same actual patient."
Property:          Patient 1..1
Property:          Relationship 1..1
                   Relationship from http://hl7.org/fhir/ValueSet/link-type (required)

Entry:             Practitioner
Parent:            Role
Description:       "A person who practices a healing art.
HumanName is limited to one required value by US-Core. Gender is required by US-Core. US-Core required an identifier, either a NPI (required if known) or tax id (permitted alternative)."
Property:          Active 0..1
                   // upper card from us-core
Property:          HumanName 1..1
Property:          ContactPoint 0..*
Property:          Address 0..*
Property:          AdministrativeGender 0..1
Property:          BirthDate 0..1
Property:          PhotographicImage 0..*
Property:          Qualification 0..*
Property:          Communication 0..*
                   Status 0..0
                   // at least one
                   // US Core preferences
                   Identifier 1..*
                   Identifier
                   includes NationalProviderIdentifier 0..1
                   includes TaxIdentificationNumber 0..1

Entry:             PractitionerRole
Description:       "A specific set of Roles/Locations/specialties/services that a practitioner may perform at an organization for a period of time."

Group:             NationalProviderIdentifier
Parent:            Identifier
Description:       "NPI: a unique 10 digit number to allow US healthcare providers to identify themselves in a standard way throughout the healthcare industry."
                   Type 1..1
                   Type = IDTYPE#PRN
                   CodeSystem = "http://hl7.org/fhir/sid/us-npi"  // fixed string Nick F's fix

Group:             TaxIdentificationNumber
Parent:            Identifier
Description:       "Tax identification number for the practitioner."
                   Type 1..1
                   Type = IDTYPE#TAX

Group:             Qualification
Description:       "A right to practice medicine obtained by training and certification."
Property:          Identifier 0..*
Property:          Type 1..1
Property:          EffectiveTimePeriod 0..1
Property:          Issuer 0..1
                   Type from http://terminology.hl7.org/ValueSet/v2-2.7-0360 (example)

                   // or http://www.wpc-edi.com/reference/codelists/healthcare/health-care-provider-taxonomy-code-set/
Entry:             Group
Parent:            Entity
Description:       "A set of entities (personnel, material, or places) to be considered together. May be a pool of like-type resources, a team, or combination of personnel, material and places."
Property:          Active 0..1
Property:          Type 1..1
Property:          Actual 1..1
Property:          Code 0..1
Property:          Name 0..1
Property:          Count 0..1
Property:          GroupCharacteristic 0..*
Property:          GroupParticipation 0..*
Property:          ManagingEntity 0..1
                   Status 0..0
                   Type from http://hl7.org/fhir/ValueSet/group-type (required)

Element:           Actual
Description:       "True if the group is an actual group (as opposed to definitional)."
Value:             boolean

Group:             GroupCharacteristic
Concept:           MTH#C0599755
Description:       "An inclusion or exclusion criterion as part of defining a cohort."
Property:          Code 1..1
Property:          GroupCharacteristicValue 0..1
Property:          ExcludeFlag 1..1
Property:          TimePeriod 0..1

Element:           GroupCharacteristicValue
Description:       "The value or range of the characteristic."
Value:             boolean or Quantity or Range

Element:           ExcludeFlag
Concept:           MTH#C0680251
Description:       "If true, exclude the subjects that match the criterion."
Value:             boolean

Group:             GroupParticipation
Parent:            Participation
Description:       "A person or entity in a group."
                   // Member
Property:          GroupParticipant 1..1
Property:          Inactive 1..1
                   ParticipationType 0..0
                   OnBehalfOf 0..0

Element:           GroupParticipant
Description:       "A person or entity in a group."
                   // or ref(Medication) or ref(Substance) // missing PractitionerRole
Value:             Patient or Practitioner or Device

Element:           Inactive
Description:       "A flag that indicates whether this item is inactive."
Value:             boolean

Element:           ManagingEntity
Description:       "Entity responsible for defining and maintaining Group characteristics and/or registered members."
                   // or ref(PractitionerRole)
Value:             Organization or RelatedPerson or Practitioner

Entry:             Location
Parent:            Entity
Description:       "Services and space and equipment provided for a particular purpose; a building or place that provides a particular service or is used for a particular industry. Could be a clinical site, community site, or a mobile facility."
Property:          OperationalStatus 0..1
Property:          Name 1..1
Property:          Alias 0..*
Property:          CommentOrDescription 0..1
Property:          Mode 0..1
Property:          Type 1..1
Property:          ContactPoint 0..*
Property:          Address 0..1
Property:          PhysicalType 0..1
Property:          Geoposition 0..1
Property:          ManagingOrganization 1..1
Property:          HoursOfOperation 0..*
Property:          AvailabilityExceptions 0..1
                   Status from http://hl7.org/fhir/ValueSet/location-status (required)
                   PartOf[Resource] substitute Location
                   Mode from http://hl7.org/fhir/ValueSet/location-mode (required)
                   // Conformance: terminology binding incompatibility between DSTU2 and R4. Leaving binding to mapping.
                   // Type from http://hl7.org/fhir/ValueSet/v3-ServiceDeliveryLocationRoleType (extensible) // DSTU2
                   // Type from http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType (extensible) //R4

                   // endpoint - not implemented
Element:           OperationalStatus
Description:       "The operational status covers operation values most relevant to beds (but can also apply to rooms/units/chairs/etc. such as an isolation unit/dialysis chair). This typically covers concepts such as contamination, housekeeping, and other activities like maintenance."
Value:             concept from http://terminology.hl7.org/ValueSet/v2-0116 (preferred)

Element:           Alias
Description:       "A list of alternate names the subject is or was known as."
Value:             string

Element:           PhysicalType
Description:       "Physical form of the location, e.g. building, room, vehicle, road."
Value:             concept from http://hl7.org/fhir/ValueSet/location-physical-type (example)

Element:           ManagingOrganization
Description:       "The organization that manages a patient, activity, facility, document, or service provision."
Value:             Organization

Group:             HoursOfOperation
Description:       "What days/times during a week is this location usually open."
Property:          DayOfWeek 0..*
Property:          AllDay 0..1
Property:          OpeningTime 0..1
Property:          ClosingTime 0..1

Element:           AllDay
Description:       "The Location is open all day."
Value:             boolean

Element:           OpeningTime
Description:       "Time that the Location opens."
Value:             time

Element:           ClosingTime
Description:       "Time that the Location closes."
Value:             time

Element:           AvailabilityExceptions
Description:       "A description of when the locations opening ours are different to normal, e.g. public holiday availability. Succinctly describing all possible exceptions to normal site availability as detailed in the opening hours Times."
Value:             string

Entry:             Substance
Parent:            Entity
Description:       "Any matter of defined composition that has discrete existence, whose origin may be biological, mineral or chemical."
Property:          Category 0..*
Property:          Code 1..1
Property:          CommentOrDescription 0..1
Property:          Ingredient 0..*
                   Status from http://hl7.org/fhir/ValueSet/substance-status (required)
                   PartOf 0..0
                   Category from http://hl7.org/fhir/ValueSet/substance-category (extensible)
                   Code from http://hl7.org/fhir/ValueSet/substance-code (example)

Group:             Ingredient
Concept:           MTH#C3176062
Description:       "Specifies an material component in a non-medication substance."
Property:          SubstanceOrCode 1..1
Property:          IngredientStrength 1..1
Property:          IsActiveIngredient 0..1

Element:           SubstanceOrCode
Description:       "A code or substance reference identifying the ingredient."
Value:             concept or Substance or Medication

Element:           IsActiveIngredient
Description:       "True if the ingredient is an active ingredient in the medication."
                   // forced to use boolean by FHIR mapping 
Value:             boolean

Element:           IngredientStrength
Description:       "Specifies how many (or how much) of the items there are in this Medication. For example, 250 mg per tablet. This is expressed as a ratio where the numerator is 250mg and the denominator is 1 tablet."
Value:             Ratio

Entry:             Medication
Parent:            Entity
Description:       "A type of prescription drug or over-the-counter drug that is used to prevent, treat, or relieve symptoms of a disease or abnormal condition, but excluding vaccines.
In FHIR DSTU2 and STU3, Medication lacks the identifier attribute, which is included in SHR as an extension.
DSTU2 lacks the status attribute, which is required by US-Core.
Batch is 0..1 in FHIR R4, and accordingly is restricted here."
Property:          Code 1..1
Property:          Manufacturer 0..1
Property:          DoseForm 0..1
Property:          PackageAmount 0..1
Property:          Ingredient 0..*
Property:          LotNumber 0..1
Property:          ExpirationDate 0..1
                   Status from http://hl7.org/fhir/ValueSet/medication-status (required)
                   // Conformance: terminology binding incompatibility between argo (DSTU2) and us-core (R4). Leaving binding to mapping.
                   // Code from  http://fhir.org/guides/argonaut/ValueSet/medication-codes (extensible) // argo (DSTU2)
                   // Code from http://hl7.org/fhir/us/core/ValueSet/us-core-medication-codes (extensible) // us-core (R4)

Element:           DoseForm
Concept:           MTH#C0013058
Description:       "The form in which active and/or inert ingredient(s) are physically presented."
Value:             concept from http://hl7.org/fhir/ValueSet/medication-form-codes (required)

Element:           PackageAmount
Description:       "Specific amount of the drug in the packaged product. For example, when specifying a product that has the same strength (For example, Insulin glargine 100 unit per mL solution for injection), this attribute provides additional clarification of the package amount (For example, 3 mL, 10mL, etc.)."
Value:             Ratio

Element:           Manufacturer
Concept:           MTH#C1114744
Description:       "The organization producing the product or test."
                   // Following FHIR; could alternatively be a code from urn:oid:2.16.840.1.114222.4.11.826 (vaccine manufacturer value set in phin-vads)
Value:             Organization

Element:           LotNumber
Concept:           MTH#C1115660
Description:       "A distinctive alpha-numeric identification code assigned by the manufacturer or distributor to a specific quantity of manufactured material or product within a batch."
Value:             string

Element:           ExpirationDate
Description:       "When the item (medication, device, etc.) will expire."
Value:             dateTime

Entry:             Organization
Parent:            Entity
Description:       "A formally or informally recognized grouping of people or organizations formed for the purpose of achieving some form of collective action. Includes companies, institutions, corporations, departments, community groups, healthcare practice groups, payer/insurer, etc.

Organization type is restricted to 0..1 in FHIR DSTU2, similarly restricted here. Other required attributes come from STU 3 mapping to us-core-organization."
Property:          Active 1..1
Property:          Type 0..1
Property:          Name 1..1
Property:          Alias 0..*
Property:          ContactPoint 1..*
Property:          Address 1..*
Property:          ContactPerson 0..*
                   // cardinality constraint
                   Status 0..0
                   Identifier 1..*
                   PartOf[Resource] substitute Organization
                   Type from http://hl7.org/fhir/ValueSet/organization-type (example)

                   // endpoint -- not implemented
Element:           CollectionSource
Description:       "The person or thing the sample was obtained from."
Value:             Patient or Group or Device or Substance

Element:           CollectionTime
Description:       "When the sample was obtained, as a specific time or time period."
Value:             dateTime or TimePeriod

Group:             AccessionIdentifier
Parent:            Identifier
Description:       "Identifier assigned by the lab"
                   Type 1..1
                   Type = IDTYPE#ACSN

Element:           HandlingRisk
Description:       "Cautions on the handling of this specimen."
Value:             concept

Element:           SpecialHandling
Description:       "Information about the proper handling of the specimen."
Value:             concept

Group:             SpecimenTreatment
Description:       "Additives added to the specimen."
Property:          Additive 0..*

Element:           AmountOrSize
Description:       "The quantity of specimen collected"
Value:             SimpleQuantity

Group:             SpecimenContainer
Description:       "Direct container of specimen (slide, etc.)"
Property:          Identifier 0..*
                   //"Kind of container holding the specimen - e.g. a vial or well."
Property:          Type 0..1
Property:          CommentOrDescription 0..1
Property:          Capacity 0..1
Property:          SpecimenQuantity 0..1
Property:          Additive 0..*
Property:          SequenceNumber 0..1

                   // BALLOT: SpecimenContainer.AdditiveCode should be 0..* to match Additive (0..* Substance). I think the idea is that there can be multiple additives. 
                   // BALLOT: In SpecimenContainer, SpecimenQuantity (datatype Quantity) describes the amount of specimen. SpecimenCollectionAction breaks out amount of specimen in a number of individual attributes: amount, volume, dimension, and size. Which is the best way to do this? Shouldn't we be consistent about how we refer to the size or amount of a specimen?
Element:           Capacity
Description:       "Container volume or size."
Value:             SimpleQuantity

Element:           SpecimenQuantity
Description:       "Quantity of specimen within container."
Value:             SimpleQuantity

Element:           Additive
Description:       "Additive associated with container."
Value:             concept or Substance

Element:           SequenceNumber
Description:       "The sequence number for this specimen in a collection of specimens."
Value:             concept

                   // BALLOT: Why is SpecimenContainer.SequenceNumber a concept? It should be an integer or a string. I don't think the sequence number will ever be coded, and concept is specifically designed for code mapping.

Entry:             Device
Parent:            Entity
Description:       "A specific durable physical device used in diagnosis or treatment. The value is the coding for a type of device, for example, a CPAP machine. The same device might be used on multiple patients.
Device status cannot be reconciled between Argonaut and US-Core, each having different required value sets.
Device type has extensible mappings to different value sets in Argonaut and US-Core, however both value sets have identical SNOMED content (descendants of 49062001 (Device). We adopt the US-Core value set, which is allowable because the binding is extensible."
                   // definition not implemented
Property:          UdiCarrier 0..*
Property:          StatusReason 0..*
Property:          DistinctIdentifier 0..1
                   // string, not ref(Organization) - only because of mapping to FHIR
Property:          ManufacturerName 0..1
Property:          ManufactureDate 0..1
Property:          ExpirationDate 0..1
Property:          LotNumber 0..1
Property:          SerialNumber 0..1
Property:          DeviceDesignation 0..*
Property:          Type 1..1
                   // specialization not implemented
                   // called 'model' in CIMI
Property:          ModelNumber 0..1
                   // not all of the R4 version structure was implemented
Property:          VersionString 0..1
                   // argo-device set lower card
Property:          Patient 1..1
Property:          Owner 0..1
Property:          ContactPoint 0..*
Property:          Location 0..1
Property:          Url 0..1
Property:          Annotation 0..*
Property:          Safety 0..*
                   PartOf[Resource] substitute Device
                   //Conformance: terminology binding incompatibility between DSTU2 and R4. Leaving binding to mapping.
                   //Status from http://hl7.org/fhir/ValueSet/devicestatus (required) //DSTU2
                   //Status from http://hl7.org/fhir/ValueSet/device-status (required) //R4
                   StatusReason from http://hl7.org/fhir/ValueSet/device-status-reason (extensible)
                   // Conformance: terminology binding incompatibility between argo and FHIR R4. Leaving binding to mapping.
                   // Type from http://fhir.org/guides/argonaut/ValueSet/device-kind (extensible) // argo (DSTU2)
                   // Type from http://hl7.org/fhir/ValueSet/device-kind (required)  // us-core (R4)

Group:             UdiCarrier
Description:       "Structure of the Unique Device Identifier (UDI) Barcode string number for a device, assigned by the organization using the device."
Property:          DeviceIdentifier 0..1
Property:          CarrierAIDC 0..1
Property:          CarrierHRF 0..1
Property:          Type 0..1
                   Type from http://hl7.org/fhir/ValueSet/udi-entry-type (required)

Element:           DeviceIdentifier
Description:       "Mandatory fixed portion of UDI"
Value:             string

Element:           CarrierAIDC
Description:       "UDI Machine Readable Barcode String"
Value:             base64Binary

Element:           CarrierHRF
Description:       "UDI Human Readable Barcode String"
Value:             string

Element:           ModelNumber
Description:       "The model number of the device, assigned by the manufacturer or vendor."
Value:             string

Element:           DistinctIdentifier
Description:       "The distinct identification string as required by regulation for a human cell, tissue, or cellular and tissue-based product."
Value:             string

Element:           ManufacturerName
Description:       "The name of the company who produced the item."
Value:             string

Element:           ManufactureDate
Description:       "When the item (medication, device, etc.) was produced."
Value:             dateTime

Element:           SerialNumber
Description:       "Serial number assigned by the manufacturer."
Value:             string

Group:             DeviceDesignation
Description:       "A name of the device as given by the manufacturer, along with a type of name."
Property:          DeviceName 1..1
Property:          Type 1..1
                   Type from http://hl7.org/fhir/ValueSet/device-nametype (required)

Element:           DeviceName
Description:       "The name of the device."
Value:             string

Element:           Owner
Description:       "An organization that is responsible for the provision and ongoing maintenance of the device."
Value:             Organization

Element:           Safety
Description:       "Provides additional safety characteristics about a medical device, for example, 'contains latex'."
Value:             concept

Entry:             Media
Parent:            Entity
Description:       "A photo, video, or audio recording acquired or used in healthcare. The actual content may be inline or provided by direct reference."
Property:          MediaBasedOn 0..*
Property:          Type 1..1
Property:          Modality 0..1
Property:          View 0..1
Property:          SubjectOfRecord 0..1
Property:          CareContext 0..1
                   // like observation
Property:          RelevantTime 0..1
Property:          StatementDateTime 0..1
Property:          Performer 0..1
Property:          ReasonCode 0..*
Property:          BodyLocation 0..1
Property:          DeviceName 0..1
Property:          Device 0..1
Property:          PixelHeight 0..1
Property:          PixelWidth 0..1
Property:          Frames 0..1
                   // horrible! this is not how duration should be captured. See Duration
Property:          NumberOfSecondsDuration 0..1
Property:          Attachment 1..1
Property:          Annotation 0..*
                   SubjectOfRecord substitute MediaSubjectOfRecord
                   Status 1..1
                   Status from http://hl7.org/fhir/ValueSet/event-status (required)
                   // Cannot make media type binding compatible with both R4 and STU3. 
                   // Type from http://hl7.org/fhir/ValueSet/digital-media-type (required)  // STU3
                   // Type from http://hl7.org/fhir/ValueSet/media-type (extensible)  // R4
                   CareContext only Encounter
                   ReasonCode from http://hl7.org/fhir/ValueSet/procedure-reason (example)

Element:           MediaBasedOn
Parent:            BasedOn
Description:       "Request that caused this media to be created"
                   Value only ServiceRequest

Element:           MediaSubjectOfRecord
Parent:            SubjectOfRecord
Description:       "A choice of Patient, Practitioner, Group, Device or Specimen. These are choices for subject of Media resource."
                   Value only Patient or Practitioner or Group or Device or Specimen

Element:           Modality
Description:       "Details of the type of the media - usually, how it was acquired (what type of device). If images sourced from a DICOM system, are wrapped in a Media resource, then this is the modality."
Value:             concept

Element:           View
Description:       "The name of the imaging view e.g. Lateral or Antero-posterior (AP)."
Value:             concept from http://hl7.org/fhir/ValueSet/media-view (example)

Element:           PixelHeight
Description:       "Height of the image in pixels (photo/video)"
Value:             positiveInt

Element:           PixelWidth
Description:       "Width of the image in pixels (photo/video)"
Value:             positiveInt

Element:           Frames
Description:       "Number of frames if > 1 (photo)"
Value:             positiveInt

Element:           NumberOfSecondsDuration
Description:       "Length in seconds (rounded to nearest whole second)"
Value:             unsignedInt