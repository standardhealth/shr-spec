Grammar:		DataElement 5.0
Namespace:		cimi.adverse
Description:	"The CIMI Adverse domain contains definitions for describing adverse events and adverse reactions."
Uses:  			shr.core, shr.base, cimi.core, cimi.element, cimi.context, cimi.topic, cimi.statement, cimi.entity, shr.research, cimi.medication

CodeSystem:		MTH = http://ncimeta.nci.nih.gov 

Element:		AdverseEventEntry
Based on:		InformationEntry
Description:	"An entry in the patient record documenting an untoward or unexpected finding observed during the course of an activity or an activity. Adverse events may capture either a workflow breach that may or may not result in harm but that must be documented for quality improvement purposes or an adverse finding whether or not it can be traceable to an actual workflow breach."
//				Signed.Attribution.EntityOrRole is type PatientOrPractitionerOrRelatedPerson  // to facilitate mapping to FHIR, which only allows Patient, Practitioner, or RelatedPerson as recorder (note: CLI crashes if we write this as Signed.Value.EntityOrRole)
0..1			Type from MedDRAVS   // no topic code
1..1			OccurrenceTime
1..1			Seriousness from SeriousnessVS  // to be replaced with http://hl7.org/fhir/ValueSet/adverse-event-seriousness in FHIR 4
//0..1			TBD "PatternOfEvent"  // from STDM
0..1			Outcome from http://hl7.org/fhir/ValueSet/adverse-event-outcome
0..1			Details   // aka description
0..*			CausalAttribution
0..*			ActionTaken
0..1			AssociatedStudy

	Element:		Seriousness   // aka seriousness
	Concept:		MTH#C2985911
	Description:	"A coded value specifying the level of injury suffered by the subject for whom the event is reported, using the CTCAE coding system."
	Value:			CodeableConcept
	
	Element:		CausalAttribution
	Concept:		MTH#C1510821 "Adverse Event Attribution to Product or ProcedurePerformed"
	Description:	"A possible cause of an observed adverse event, known or theorized. There can be more than one possible cause."
	Value:			CodeableConcept should be from http://hl7.org/fhir/ValueSet/substance-code or ref(Substance) or ref(Medication) or ref(MedicationUsedStatement) or ref(Device) //ref(ActionPerformedStatement)
	1..1			CauseCategory 
	1..1			Certainty
	0..1			RouteIntoBody  // aka exposure route

			Element:		CauseCategory
			Concept:		TBD
			Description:	"Whether the adverse event is attributed to a treatment, course of the disease, unrelated to either, or unknown. "
			Value:			CodeableConcept from AttributionCategoryVS
	
	Element:		ActionTaken
	Concept:		TBD
	Description:	"The action taken as a result of the adverse reaction. May include changing or discontinuing medication, reducing dose, etc."
	1..1			Details
	0..1			ref(ActionStatement)  // such as MedicationChangeStatement

	Element:		AssociatedStudy
	Description:	"The related clinical trial or other formal study."
	Value:			ref(Study)


Element:		AdverseReactionTopic
Based on:		AssertionTopic
Description:	"An instance of a negative response to a substance."
0..*			Manifestation
0..*			CausalAttribution

		Element:	Manifestation
		Concept:	MTH#C1280464
		Description:	"A sign or symptom of an underlying condition."
		Value:		CodeableConcept from ManifestationVS
		0..1		Severity from http://hl7.org/fhir/ValueSet/reaction-event-severity

//---------------- Instantiations --------------
		 
EntryElement:	AdverseReactionPresenceStatement
Based on:		ClinicalStatement
				StatementTopic is type AdverseReactionTopic
				StatementContext is type PresenceContext
//				AdverseReactionTopic.CausalAttribution value is type CodeableConcept  // mapping to FHIR


EntryElement:	ToxicEventEntry // In truth, this should be a filter on AdverseEventPresenceStatement, not a separate class
Based on:		AdverseEventEntry
Concept:		MTH#C0542243
Description:	"A grade 3 or 4 adverse reaction to medication, radiation treatment, or other therapy."
				Seriousness from ToxicSeriousnessVS				
