Grammar:		DataElement 5.0
Namespace:		cimi.statement
Description:	"The namespace containing cimi-derived classes representing complete clinical statements. In this specification, these classes derive from the StatementTopic class hierarchy, not ClinicalStatement, which is a significant departure from CIMI. This simplifies the resulting logical models."
Uses:			shr.core, cimi.core, cimi.element, cimi.topic, cimi.context, cimi.entity


CodeSystem:     SCT = http://snomed.info/sct
CodeSystem:		MTH = http://ncimeta.nci.nih.gov
CodeSystem:		NCI = https://evs.nci.nih.gov/ftp1/CDISC/SDTM/
CodeSystem:		OBSCAT = http://hl7.org/fhir/observation-category


Element:		ClinicalStatement
Based on:		InformationEntry
Concept:		TBD
Description: 	"A special type of information entry consisting of a topic and a context. 
The ClinicalStatement class provides the core pattern for more specific clinical statement classes, such as a statement that a finding has been found in a patient or that a procedure has been proposed by a clinical decision support system. The ClinicalStatement pattern defines the core attributes common to most clinical statements and specifies a composition pattern that encourage model component reuse and better alignment with the SNOMED CT Concept Model. A clinical statement is composed of the StatementTopic class (grouping of attributes for capturing information about a procedure or a clinical finding) and the StatementContext class (grouping of attributes providing the context for the statement topic such as whether a procedure was performed, requested, not performed or whether a finding is suspected present or absent in the patient). At the archetype level, the topic and context components are coordinated to form the clinical statement. For instance, the composition of the ProcedureTopic with the NotPerformed context indicates that the given procedure was not performed."
1..1			StatementTopic
1..1			StatementContext

//---------- Actions --------------

Abstract Element:	ActionStatement
Based on:			ClinicalStatement
Description:		"Abstract class representing any type of action, independent of context."
					StatementTopic is type ActionTopic

Abstract Element:	ActionPerformedStatement
Based on:			ActionStatement
Description:		"Abstract class representing performance of any type of action."
					StatementContext is type PerformedContext

Abstract Element:	ActionRequestedStatement
Based on:			ActionStatement
Description:		"Abstract class representing a request for any type of action."
					StatementContext is type RequestedContext

Abstract Element:	ActionNotPerformedStatement
Based on:			ActionStatement
Description:		"Abstract class representing non-performance of any type of action."
					StatementContext is type NotPerformedContext

Abstract Element:	ActionRequestedAgainstStatement
Based on:			ActionStatement
Description:		"Abstract class representing a request to not perform any type of action."
					StatementContext is type RequestedAgainstContext

//-------------Findings------------

Abstract Element:	FindingStatement
Based on:			ClinicalStatement
Description:		"Any clinical statement representing a finding."
					StatementTopic is type FindingTopic

/*
[Entry]ShrId
[Entry]EntryId
[Entry]PersonOfRecord
[Entry]Version
[Entry]EntryType
[Entry]CreationTime
[Entry]LastUpdated
[Entry]Narrative
[Entry]Language
[Entry]SecurityLabel
[Entry]Tag
[Entry]DerivedFrom
[InformationEntry]SubjectOfInformation
[InformationEntry]SourceOfInformation
[InformationEntry]Annotation
[InformationEntry]RecordStatus
[InformationEntry]Recorded (who-when)
[InformationEntry]Signed (who-when)
[InformationEntry]Cosigned (who-when)
[InformationEntry]Verified (who-when)
FindingTopic.FindingMethod
FindingTopic.Details
*/

EntryElement:	Observation   // TODO: be consistent, or stop using the word "Statement" in class names 
Based on:		FindingStatement
Concept:		TBD
Description:	"Represents the result of evaluations (measurements, tests, or questions) that have been performed.
Observation has a value representing the result (answer), or an ExceptionValue indicating why the value is not present. The subject of a finding can be the entire patient, or an entity such as a location body structure, intervention, or condition. Things observed about the subject can include social and behavioral factors, subjective and objective observations, and assessments."
				StatementTopic is type EvaluationResultTopic
				StatementContext is type ObservationContext
				SubjectOfInformation value is type ref(Patient)  // FHIR to align with US Core Result
// shr-cli bug: Signed.Value.EntityOrRole crashes
				Signed.Attribution.EntityOrRole is type AnyPersonOrOrganization // mapped to performer (who made the observation)
/* 
 Here's a list of all the attributes of Observation. 
 To keep things straight, always consider the constraints on each element in this order:
	// ClinicalStatement
		SubjectOfInformation
		SourceOfInformation
		Annotation
		RecordStatus
		Recorded
		Signed  // aka Author
		Cosigned
		Verified
	// Topic	
		EvaluationResultTopic.TopicCode
		EvaluationResultTopic.FindingMethod
		EvaluationResultTopic.Details
		EvaluationResultTopic.Category from http://hl7.org/fhir/ValueSet/observation-category if covered
		EvaluationResultTopic.AnatomicalLocation  // TODO: Change from element to code to align with FHIR??
		EvaluationResultTopic.Focus
		EvaluationResultTopic.ref(Device)
		EvaluationResultTopic.ref(Specimen)
		EvaluationResultTopic.DiagnosticService
		EvaluationResultTopic.Precondition
		EvaluationResultTopic.ReferenceRange
		EvaluationResultTopic.EvaluationComponent
		EvaluationResultTopic.PanelMembers
		EvaluationResultTopic.EvaluationComponent.Value
		EvaluationResultTopic.EvaluationComponent.ExceptionValue
		EvaluationResultTopic.EvaluationComponent.Interpretation
		EvaluationResultTopic.EvaluationComponent.ReferenceRange
	// Context	
		ObservationContext.ContextCode is SCT#424975005 "Record Entity"
		ObservationContext.Interpretation
		ObservationContext.FindingStatus
		ObservationContext.RelevantTime  
		ObservationContext.Encounter
		ObservationContext.ResultValue
		ObservationContext.ExceptionValue
		ObservationContext.DeltaFlag
*/

//  Non-Laboratory Results

EntryElement:	NonLaboratoryObservation
Based on:		Observation
Description:	"An observation not based on a specimen."
0..0			EvaluationResultTopic.Specimen
0..0			EvaluationResultTopic.DiagnosticService

EntryElement:	SimpleNonLaboratoryObservation
Based on:		NonLaboratoryObservation
Description:	"An observation having no components or panel members"
0..0			EvaluationResultTopic.EvaluationComponent
0..0			EvaluationResultTopic.PanelMembers

EntryElement:	CodedNonLaboratoryObservation
Based on:		NonLaboratoryObservation
Concept:		TBD
Description:	"The result of evaluations (measurements, tests, or questions) whose answer is expressed as a code."
				ObservationContext.ResultValue value is type CodeableConcept
0..0			EvaluationResultTopic.ReferenceRange

EntryElement:	SimpleCodedNonLaboratoryObservation
Based on:		CodedNonLaboratoryObservation
Description:	"An observation whose result is a code, and also having no components or panel members"
0..0			EvaluationResultTopic.EvaluationComponent
0..0			EvaluationResultTopic.PanelMembers

EntryElement:	ComponentOnlyNonLaboratoryObservation
Based on:		NonLaboratoryObservation
Description:	"An observation with components, but without a result value or panel members."
0..0			ObservationContext.ResultValue
0..0			ObservationContext.ExceptionValue
0..0			EvaluationResultTopic.PanelMembers
0..0			EvaluationResultTopic.ReferenceRange

EntryElement:	PanelOnlyNonLaboratoryObservation
Based on:		NonLaboratoryObservation
Description:	"An observation with panel members, but without a result value or components."
0..0			ObservationContext.ResultValue
0..0			ObservationContext.ExceptionValue
0..0			EvaluationResultTopic.ReferenceRange
0..0			EvaluationResultTopic.EvaluationComponent
1..1			EvaluationResultTopic.PanelMembers

// Laboratory Measurements and Results

EntryElement:	LaboratoryObservation
Based on:		Observation
Description:	"A coded finding based on a specimen collected from a patient."
1..1			EvaluationResultTopic.Specimen
0..0			EvaluationResultTopic.AnatomicalLocation  // AnatomicalLocation is where the Specimen was collected
				EvaluationResultTopic.Category is OBSCAT#laboratory

EntryElement:	CodedLaboratoryObservation
Based on:		LaboratoryObservation
Description:	"A coded finding from a laboratory test."
				ObservationContext.ResultValue value is type CodeableConcept
0..0			EvaluationResultTopic.ReferenceRange

EntryElement:	SimpleLaboratoryObservation
Based on:		LaboratoryObservation
Description:	"A coded finding from a laboratory test without further panel members or components."
0..0			EvaluationResultTopic.EvaluationComponent
0..0			EvaluationResultTopic.PanelMembers

EntryElement:	SimpleCodedLaboratoryObservation
Based on:		CodedLaboratoryObservation
Description:	"A coded finding from a laboratory test without further panel members or components."
0..0			EvaluationResultTopic.EvaluationComponent
0..0			EvaluationResultTopic.PanelMembers

//---------- Assertions -------------

Abstract Element:	AssertionStatement
Based on:			FindingStatement
Description:		"A clinical statement that asserts presence or absence."

Abstract Element:	AssertionPresenceStatement  // AssertPresence
Based on:			AssertionStatement
Description:		"Statement that a finding is present."
					StatementContext is type PresenceContext

Abstract Element:	AssertionAbsenceStatement  // AssertAbsence
Based on:			AssertionStatement
Description:		"Statement that a finding is absent."
					StatementContext is type AbsenceContext

EntryElement:	ConditionPresenceStatement
Based on:		AssertionPresenceStatement
Concept:		TBD
Description:	"A condition that is or may be present in a subject. 'Condition' is interpreted broadly and could be a disorder, abnormality, problem, injury, complaint, functionality, illness, disease, ailment, sickness, affliction, upset, difficulty, disorder, symptom, worry, or trouble."
				SourceOfInformation value is type PatientOrPractitionerOrRelatedPerson
				StatementTopic is type ConditionTopic
				StatementContext is type ConditionPresenceContext
				SubjectOfInformation value is type ref(Patient)

EntryElement:	ConditionAbsenceStatement
Based on:		AssertionAbsenceStatement
Concept:		MTH#C0277541  "no disease present"
Description:	"A finding that a condition is or was not present in the subject at a certain time, not necessarily the time the information is gathered."
				StatementTopic is type ConditionTopic
				
EntryElement:	ClinicalNote
Based on:		FindingStatement
Concept:		MTH#C0747978 "Progress Note"
Description:	"An entry concerning a patient where the result is a narrative text. Can be related to a specific Focus, such as a condition; and evidence and interpretation from FindingTopic."
				StatementContext is type RecordedContext
1..1			StatementTopic.Details   // TODO: change to "description" to synch with CIMI